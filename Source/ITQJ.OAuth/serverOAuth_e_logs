2020-07-30 18:30:27.239 -04:00 [ERR] Client not authorized for client credentials flow, check the AllowedGrantTypes setting{"clientId":"itqj_web_client"}, details: {"ClientId":"itqj_web_client","ClientName":"ITQJ-WebClient","GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"itqj_web_client","client_secret":"***REDACTED***","grant_type":"client_credentials"},"$type":"TokenRequestValidationLog"}
2020-07-30 22:28:26.466 -04:00 [ERR] Client not authorized for client credentials flow, check the AllowedGrantTypes setting{"clientId":"itqj_code_web_client"}, details: {"ClientId":"itqj_code_web_client","ClientName":"ITQJ-WebClient","GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"itqj_api","client_id":"itqj_code_web_client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-07-31 11:22:31.974 -04:00 [FTL] Host terminated unexpectedly.
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at Microsoft.Extensions.Hosting.Internal.Host.StopAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.WaitForShutdownAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at ITQJ.OAuth.Program.Main(String[] args) in C:\Projects\Visual Studio\ITSC\ITQJ\Source\ITQJ.OAuth\Program.cs:line 68
2020-07-31 11:22:56.890 -04:00 [FTL] Host stoped: The operation was canceled.
2020-07-31 12:18:10.983 -04:00 [ERR] Client not authorized for client credentials flow, check the AllowedGrantTypes setting{"clientId":"itqj_code_web_client"}, details: {"ClientId":"itqj_code_web_client","ClientName":"ITQJ-WebClient","GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"itqj_api","client_id":"itqj_code_web_client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-07-31 12:18:53.047 -04:00 [ERR] Client not authorized for client credentials flow, check the AllowedGrantTypes setting{"clientId":"itqj_code_web_client"}, details: {"ClientId":"itqj_code_web_client","ClientName":"ITQJ-WebClient","GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"itqj_api","client_id":"itqj_code_web_client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-07-31 12:21:53.898 -04:00 [ERR] Client not authorized for client credentials flow, check the AllowedGrantTypes setting{"clientId":"itqj_code_web_client"}, details: {"ClientId":"itqj_code_web_client","ClientName":"ITQJ-WebClient","GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"itqj_api","client_id":"itqj_code_web_client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-07-31 13:53:16.489 -04:00 [ERR] Client not authorized for client credentials flow, check the AllowedGrantTypes setting{"clientId":"itqj_code_web_client"}, details: {"ClientId":"itqj_code_web_client","ClientName":"ITQJ-WebClient","GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"itqj_api","client_id":"itqj_code_web_client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-07-31 16:18:14.703 -04:00 [ERR] Client not authorized for client credentials flow, check the AllowedGrantTypes setting{"clientId":"itqj_code_web_client"}, details: {"ClientId":"itqj_code_web_client","ClientName":"ITQJ-WebClient","GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"itqj_api","client_id":"itqj_code_web_client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-07-31 16:48:52.949 -04:00 [ERR] No client identifier found
2020-07-31 17:01:52.411 -04:00 [ERR] Client not authorized for client credentials flow, check the AllowedGrantTypes setting{"clientId":"itqj_code_web_client"}, details: {"ClientId":"itqj_code_web_client","ClientName":"ITQJ-WebClient","GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"itqj_api","client_id":"itqj_code_web_client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-07-31 17:04:27.967 -04:00 [ERR] Client not authorized for client credentials flow, check the AllowedGrantTypes setting{"clientId":"itqj_code_web_client"}, details: {"ClientId":"itqj_code_web_client","ClientName":"ITQJ-WebClient","GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"itqj_api","client_id":"itqj_code_web_client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-07-31 17:11:55.214 -04:00 [ERR] Client not authorized for client credentials flow, check the AllowedGrantTypes setting{"clientId":"itqj_code_web_client"}, details: {"ClientId":"itqj_code_web_client","ClientName":"ITQJ-WebClient","GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"itqj_api","client_id":"itqj_code_web_client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-08-01 01:21:07.951 -04:00 [ERR] An error occurred using the connection to database 'ITQJ_DB.OAUTH' on server '(localdb)\MSSQLLocalDB'.
2020-08-01 01:21:10.051 -04:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=16456; handshake=352; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:14489bca-179e-4314-a2de-03926e623fa0
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=16456; handshake=352; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:14489bca-179e-4314-a2de-03926e623fa0
Error Number:-2,State:0,Class:11
2020-08-01 01:21:10.138 -04:00 [ERR] Exception removing expired grants: Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=16456; handshake=352; 
